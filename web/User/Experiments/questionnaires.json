{"all_procs": {"procedure_1.csv": [["Item", "Trial Type", "Max Time", "Text", "Shuffle 1", "survey", ""], ["2", "Instruct", "user", "This is the start of a new experiment.", "off", "", ""], ["0", "survey", "user", "", "off", "zqa_pq.csv", ""], ["0", "survey", "user", "", "off", "ius.csv", ""], ["0", "survey", "user", "", "off", "bis11.csv", ""], ["", "", "", "", "", "", ""]]}, "cond_array": [["Name", "Notes", "Stimuli", "Procedure", "fullscreen", "welcome", "participant_id", "end_message", "start_message", "buffer", ""], ["condition_1", "You can put more detailed notes in this field", "stimuli_1.csv", "procedure_1.csv", "off", "", "on", "", "", "5", ""], ["", "", "", "", "", "", "", "", "", "", ""]], "all_stims": {"stimuli_1.csv": [["Cue", "Answer", ""], ["A", "Apple", ""], ["B", "Banana", ""], ["", "", ""]]}, "procedure": null, "stimuli": null, "public_key": "bi5g1zW2bahhEq6KX5e/tjSD/okZ1l4x8seE1kWd0Uw=", "save_script": "https://script.google.com/macros/s/AKfycbwUZCgCRM1Enhz0iFxB6NaRL-y7rZ4LBrDziBb-U1wt5Mmd3tlY/exec", "parsed_procs": {"procedure_1.csv": [{"survey": "", "": "", "item": "2", "trial type": "instruct", "max time": "user", "text": "This is the start of a new experiment.", "shuffle 1": "off"}, {"survey": "zqa_pq.csv", "": "", "item": "0", "trial type": "survey", "max time": "user", "text": "", "shuffle 1": "off"}, {"survey": "ius.csv", "": "", "item": "0", "trial type": "survey", "max time": "user", "text": "", "shuffle 1": "off"}, {"survey": "bis11.csv", "": "", "item": "0", "trial type": "survey", "max time": "user", "text": "", "shuffle 1": "off"}]}, "surveys": {"zqa_pq.csv": [["item_name", "text", "Type", "Answers", "Values", "Score: TAS", "Score:ES", "Score:DIS", "Score:BS_Imp", "Optional", ""], ["Instructions1", "A number of statements are shown below that describe some ways in which people act and think. Please indicate for each statement how much you agree or disagree. If you have not experienced that circumstance, please try to describe how you would act or what you think about that situation. Be sure to indicate your agreement or disagreement for every statement.", "Instruct", "", "", "", "", "", "", "", ""], ["ZKA-PQ1", "I enjoy the sensations of speeding in a car", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "1", "", "", "", "No", ""], ["ZKA-PQ2", "I would like to take off on a trip with no pre-planned or definite routes or timetables", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "1", "", "", "No", ""], ["ZKA-PQ3", "I\u2019ll try anything once", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "1", "", "No", ""], ["ZKA-PQ4", "I prefer friends who are excitingly unpredictable", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "", "1", "No", ""], ["ZKA-PQ5", "I like some physical activities that are somewhat risky", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "1", "", "", "", "No", ""], ["ZKA-PQ6", "I enjoy getting into new situations where you can\u2019t predict how things will turn out", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "1", "", "", "No", ""], ["ZKA-PQ7", "I like \u2018wild\u2019 uninhibited parties", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "1", "", "No", ""], ["ZKA-PQ8", "I get restless if I have to stay around home for any length of time", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "", "1", "No", ""], ["ZKA-PQ9", "I prefer fast-moving activities or sports", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "1", "", "", "", "No", ""], ["ZKA-PQ10", "I would like the kind of life where one is on the move and traveling a lot, with lots of change and excitement", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "1", "", "", "No", ""], ["ZKA-PQ11", "I like to let myself go and do impulsive things just for fun", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "1", "", "No", ""], ["ZKA-PQ12", "I enjoy spending time in the familiar surroundings of my home or apartment", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "", "r1", "No", ""], ["ZKA-PQ13", "I would like to learn to fly an airplane", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "1", "", "", "", "No", ""], ["ZKA-PQ14", "I would like to travel to foreign lands where the people are quite different from the people in my own country", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "1", "", "", "No", ""], ["ZKA-PQ15", "I go to parties to meet exciting and stimulating people", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "1", "", "No", ""], ["ZKA-PQ16", "I am polite and attentive to someone even if I do not find their conversation interesting", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "", "r1", "No", ""], ["ZKA-PQ17", "I think I would enjoy being a fire-fighter", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "1", "", "", "", "No", ""], ["ZKA-PQ18", "I like people who are unusual or different from most other people", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "1", "", "", "No", ""], ["ZKA-PQ19", "I do not try to restrain my urges to have exciting experiences", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "1", "", "No", ""], ["ZKA-PQ20", "I have a reserved and cautious attitude toward life", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "", "r1", "No", ""], ["ZKA-PQ21", "If I were in the Army I might volunteer for exciting but dangerous duties", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "1", "", "", "", "No", ""], ["ZKA-PQ22", "I enjoy many types of loud, intense rock music", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "1", "", "", "No", ""], ["ZKA-PQ23", "I prefer quiet parties where one can have good conversation", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "r1", "", "No", ""], ["ZKA-PQ24", "My thinking is usually cautious and sensible", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "", "r1", "No", ""], ["ZKA-PQ25", "I do not like to engage in sports or activities in which there is a significant risk of getting hurt", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "r1", "", "", "", "No", ""], ["ZKA-PQ26", "I would not like a job involving a lot of travel", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "r1", "", "", "No", ""], ["ZKA-PQ27", "I am not interested in having new experiences just for the sake of experiencing new sensations", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "r1", "", "No", ""], ["ZKA-PQ28", "I don\u2019t like to start a project until I know exactly how to proceed", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "", "r1", "No", ""], ["ZKA-PQ29", "I don\u2019t think I would like flying in a small airplane", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "r1", "", "", "", "No", ""], ["ZKA-PQ30", "I do not like people who behave in uncontrolled and unconventional ways", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "r1", "", "", "No", ""], ["ZKA-PQ31", "I enjoy quiet, melodic popular or classical music", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "r1", "", "No", ""], ["ZKA-PQ32", "I tend to value and follow a rational and moderate approach to things", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "", "r1", "No", ""], ["ZKA-PQ33", "Given a choice I would never volunteer for any activity that is physically risky", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "r1", "", "", "", "No", ""], ["ZKA-PQ34", "I am comfortable with the familiarity of a fixed daily routine", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "r1", "", "", "No", ""], ["ZKA-PQ35", "One should not go too far in physical intimacy until one gets to know the other person", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "r1", "", "No", ""], ["ZKA-PQ36", "I usually make up my mind through careful reasoning", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "", "r1", "No", ""], ["ZKA-PQ37", "I would never travel to other countries where there is unrest and the threat of violence", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "r1", "", "", "", "No", ""], ["ZKA-PQ38", "I would prefer to travel to places where people speak my language and have the same customs", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "r1", "", "", "No", ""], ["ZKA-PQ39", "One of my goals in life is to experience intense and pleasurable sensations", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "1", "", "No", ""], ["ZKA-PQ40", "Before I get into a new situation I like to find out what to expect from it", "likert", "Disagree strongly|Disagree somewhat|Agree somewhat|Agree strongly", "1|2|3|4", "", "", "", "r1", "No", ""], [null, null, null, null, null, null, null, null, null, null, ""]], "ius.csv": [["item_name", "text", "Type", "Answers", "Values", "Score: Factor1", "Score:Factor2", "Optional", ""], ["Instructions1", "You will find a series of statements that describe how people may react to the uncertainties of life.  Please use the scale to describe to what extent each item is characteristic of you. ", "Instruct", "", "", "", "", "", ""], ["IUS1", "Uncertainty stops me from having a firm opinion", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS2", "Being uncertain means that a person is disorganized", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS3", "Uncertainty makes life intolerable", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS4", "It's not fair that there are no guarantees in life", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["IUS5", "My mind can't be relaxed if I don\u2019t know what will happen tomorrow", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["IUS6", "Uncertainty makes me uneasy, anxious, or stressed", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["IUS7", "Unforseen events upset me greatly", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["IUS8", "It frustrates me not having all the information I need", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["IUS9", "Being uncertain allows me to forsee the consequences beforehand and to prepare for them", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS10", "One should always look ahead so as to avoid surprises", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["IUS11", "A small unforseen event can spoil everything, even with the best of planning", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["IUS12", "When it's time to act uncertainty paralyzes me", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS13", "Being uncertain means that I am not first rate", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS14", "When I am uncertain I can't go forward", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS15", "When I am uncertain I can't function very well", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS16", "Unlike me, others always seem to know where they are going with their lives", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS17", "Uncertainty makes me vulnerable, unhappy, or sad", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS18", "I always want to know what the future has in store for me", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["IUS19", "I hate being taken by surprise", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["IUS20", "The smallest doubt stops mefrom acting", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS21", "I should be able to organize everything in advance", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["IUS22", "Being uncertain means that I lack confidence", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS23", "I think it's unfair that other people seem sure about their future", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS24", "Uncertainty stops me from sleeping well", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS25", "I must get away from uncertain situations", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "1", "", "No", ""], ["IUS26", "The ambiguities in life stress me", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["IUS27", "I can't stand being undecided about my future", "likert", "Not at all characteristic of me<br>1|<br>2|<br>3|<br>4|Highly characteristic of me<br>5", "1|2|3|4|5", "", "1", "No", ""], ["", "", "", "", "", "", "", "", ""]], "bis11.csv": [["item_name", "text", "Type", "Answers", "Values", "Score: Attention", "Score:Cognitive_instability", "Score:Attentional_2ndOrder", "Score:Motor", "Score:Perseverance", "Score:Motor_2ndOrder", "Score:Self_control", "Score:Cognitive_complexity", "Score:Nonplanning_2ndOrder", "Optional", null], ["Instructions1", " People differ in the ways they act and think in different situations.  This is a test to measure some of the ways in which you act and think.  Read each statement and select the most appropriate answer. Do not spend too much time on any statement. Answer quickly and honestly", "Instruct", "", "", "", "", "", "", "", "", "", "", "", "", null], ["BIS1", "I plan tasks carefully", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "", "", "r1", "", "r1", "No", null], ["BIS2", "I do things without thinking", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "1", "", "1", "", "", "", "No", null], ["BIS3", "I make-up my mind quickly", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "1", "", "1", "", "", "", "No", null], ["BIS4", "I am happy-go-lucky", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "1", "", "1", "", "", "", "No", null], ["BIS5", "I don\u2019t \u201cpay attention\u201d", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "1", "", "1", "", "", "", "", "", "", "No", null], ["BIS6", "I have \u201cracing\u201d thoughts", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "1", "1", "", "", "", "", "", "", "No", null], ["BIS7", "I plan trips well ahead of time", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "", "", "r1", "", "r1", "No", null], ["BIS8", "I am self controlled", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "", "", "r1", "", "r1", "No", null], ["BIS9", "I concentrate easily", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "r1", "", "r1", "", "", "", "", "", "", "No", null], ["BIS10", "I save regularly", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "", "", "", "r1", "r1", "No", null], ["BIS11", "I \u201csquirm\u201d at plays or lectures", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "1", "", "1", "", "", "", "", "", "", "No", null], ["BIS12", "I am a careful thinker", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "", "", "r1", "", "r1", "No", null], ["BIS13", "I plan for job security", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "", "", "r1", "", "r1", "No", null], ["BIS14", "I say things without thinking", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "", "", "1", "", "1", "No", null], ["BIS15", "I like to think about complex problems", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "", "", "", "r1", "r1", "No", null], ["BIS16", "I change jobs", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "1", "1", "", "", "", "No", null], ["BIS17", "I act \u201con impulse\u201d", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "1", "", "1", "", "", "", "No", null], ["BIS18", "I get easily bored when solving thought problems", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "", "", "", "1", "1", "No", null], ["BIS19", "I act on the spur of the moment", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "1", "", "1", "", "", "", "No", null], ["BIS20", "I am a steady thinker", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "r1", "", "r1", "", "", "", "", "", "", "No", null], ["BIS21", "I change residences", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "1", "1", "", "", "", "No", null], ["BIS22", "I buy things on impulse", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "1", "", "1", "", "", "", "No", null], ["BIS23", "I can only think about one thing at a time", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "1", "1", "", "", "", "No", null], ["BIS24", "I change hobbies", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "1", "1", "", "", "", "", "", "", "No", null], ["BIS25", "I spend or charge more than I earn", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "1", "", "1", "", "", "", "No", null], ["BIS26", "I often have extraneous thoughts when thinking", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "1", "1", "", "", "", "", "", "", "No", null], ["BIS27", "I am more interested in the present than the future", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "", "", "", "1", "1", "No", null], ["BIS28", "I am restless at the theater or lectures", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "1", "", "1", "", "", "", "", "", "", "No", null], ["BIS29", "I like puzzles", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "", "", "", "r1", "r1", "No", null], ["BIS30", "I am future oriented", "likert", "Rarely/Never|Occasionally|Often|Almost Always/Always", "1|2|3|4", "", "", "", "", "r1", "r1", "", "", "", "No", null], [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null]]}, "trialtypes": {"instruct": "<!--\n/*  Collector (Garcia, Kornell, Kerr, Blake & Haffey)\n    A program for running experiments on the web\n    Copyright 2012-2016 Mikey Garcia & Nate Kornell\n\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License version 3 as published by\n    the Free Software Foundation.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>\n \t\t\n\t\tKitten release (2019) author: Dr. Anthony Haffey (a.haffey@reading.ac.uk)\t\t\n*/\n-->\n<style>\n#instruct_text{\n  margin:auto;\n  width:500px;\n  padding:50px;\n  max-height:600px;\n  text-align: center;  \n}\n#proceed_button{\n  position:absolute;\n  right: 20px;\n}\n#trial_contents{\n  position: absolute;\n  top:0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin:auto;\n  width:600;\n  height:600;\n}\n</style>\n<div id=\"trial_contents\">\n  <div id=\"instruct_text\">{{text}}</div>\n  <div>\n    <button class=\"btn btn-primary\" id=\"proceed_button\" onclick=\"Trial.submit()\">Proceed</button>\n  </div>\n</div>", "survey": "<!--\n  Author: Dr. Anthony Haffey\n\n  Collector: Cat/Kitten release\n  A program for running experiments on the web\n  Copyright 2012-2018 Mikey Garcia & Nate Kornell\n\n\n  This program is free software: you can redistribute it and/or modify\n  it under the terms of the GNU General Public License version 3 as published by\n  the Free Software Foundation.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  GNU General Public License for more details.\n\n  You should have received a copy of the GNU General Public License\n  along with this program.  If not, see <http://www.gnu.org/licenses/>\n\n  Kitten release (2019) author: Dr. Anthony Haffey (a.haffey@reading.ac.uk)\n-->\n<style>\ntd{\n  padding:10px;\n  vertical-align: top;\n}\n#content{\n  width:95%;\n}\n#proceed_button{\n  display:none;\n  float:right;\n}\n#this_survey_id{\n  padding:            20px;\n  display:            none;\n}\n#survey_outline{\n  background-color:   white;\n  color:              #0a3272;\n  border-radius:      20px;\n}\n#survey_tabs{\n  padding:            20px;\n}\n\n.btn-primary{\n\tcolor:#fff;\n\tbackground-color:#069;\n\tborder-color:#069;\n}\n.btn-primary:hover,\n.btn-primary:focus {\n  background-color: #09c;\n}\n\n.btn-primary:focus {\n  outline: 0;\n}\n\n.btn-primary:active {\n  background-color:#0f9;\n}\n.feedback_span_multiple{\n  display:none;\n  margin :10px;\n}\n.feedback_span_single{\n  display:none;\n  padding:10px;\n}\n.likert_table td{\n  padding:1px;\n  text-align:center;\n}\n.likert_table td:hover{\n  color:blue;\n}\n.score_total{\n  display:none;\n}\n.show_tab{\n  margin:5px;\n}\n.table_break{\n  width:100%;\n}\n</style>\n<div id=\"survey_outline\"></div>\n<script>\n/////////////////////////\n// Retrieving settings //\n/////////////////////////\n\nif(typeof(settings) !== \"undefined\"){\n  settings = [settings];\n} else {\n  settings = {};\n}\n\n//////////////////////////////////\n// vertical vs. horizontal tabs //\n//////////////////////////////////\n\nif(typeof(settings.tab_hor_vert) == \"undefined\" || settings.tab_hor_vert.toLowerCase() == \"horizontal\"){\n  settings.tab_hor_vert = \"horizontal\";\n  $(\"#survey_outline\").html(  '<div id=\"please_wait_div\">Loading... Please wait</div>'+\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>'+\n                              '<div id=\"survey_tabs\" style=\"text-align:right\" class=\"border-top border-primary\"></div><input type=\"submit\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">');\n\n} else if (settings.tab_hor_vert.toLowerCase() == \"vertical\"){\n  $(\"#survey_outline\").html( '<table>'+\n                                '<tr>'+\n                                  '<td valign=\"top\" class=\"border-right border-primary\">'+\n                                    '<div id=\"survey_tabs\"></div></td>' +\n                                  '<td>'+\n                                    '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\n                                    '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>' +\n                                    '<input type=\"button\" value=\"Proceed\" class=\"btn btn-primary\" id=\"proceed_button\">'+\n                                  '</td>'+\n                                '</tr>'+\n                              '</table>');\n} else if(settings.tab_hor_vert.toLowerCase() == \"none\"){\n  $(\"#survey_outline\").html(  '<div id=\"survey_tabs\" style=\"display:none\"></div>' +\n                              '<div id=\"please_wait_div\">Please wait while survey is downloading</div>'+\n                              '<div id=\"this_survey_id\" class=\"needs-validation\" novalidate></div>');\n} else {\n  bootbox.alert(\"If you are the researcher, please check the 'settings for this survey. The input for 'tab_hor_vert' appears to be invalid. Please change it to 'horizontal' or 'vertical' or 'none' or remove 'tab_hot_vert' altogether from the settings, which will make the tabs invisible\");\n}\n</script>\n\n<span id=\"scales_span\"></span>\n\n<script>\n\nString.prototype.replaceAll = function(str1, str2, ignore) {\n  //by qwerty at https://stackoverflow.com/questions/2116558/fastest-method-to-replace-all-instances-of-a-character-in-a-string\n  return this.replace(new RegExp(str1.replace(/([\\/\\,\\!\\\\\\^\\$\\{\\}\\[\\]\\(\\)\\.\\*\\+\\?\\|\\<\\>\\-\\&])/g,\"\\\\$&\"),(ignore?\"gi\":\"g\")),(typeof(str2)==\"string\")?str2.replace(/\\$/g,\"$$$$\"):str2);\n}\n\n\n//////////////////////\n// Defining objects //\n//////////////////////\n\npage_break_management = {\n  breaks_remaining : 0,\n  breaks_index     : 0\n}\n\nproceed_object = {\n  type:[],\n  name:[],\n  break_no:[]\n};\n\nscoring_object={\n  scales:[],\n  scale_scores:[],\n  update_scales:function(this_survey){\n    headers = Object.keys(this_survey[0]);\n    this.scales = headers.filter(elm => elm.includes(\"score:\"));\n    var scales_html = '';\n    this.scales.forEach(function(element){\n      element = element.replace(\": \",\":\");\n      scales_html += \"<input name='\"+element.replace(/ |:/g,\"_\")+\"' class='score_total \"+element.replace(/ |:/g,\"_\")+\"' disabled>\";\n    });\n    $(\"#scales_span\").html(scales_html);\n  }\n}\n\nsurvey_obj = {};\n\n\n/////////////////////\n// Element actions //\n/////////////////////\n\n/*\n$(function() {\n  $( \".datepicker\" ).datepicker({\n    dateFormat : 'mm/dd/yy',\n    changeMonth : true,\n    changeYear : true,\n    yearRange: '-100y:c+nn',\n    maxDate: '-1d'\n  });\n});\n*/\n\n\n$('#ExperimentContainer').css('transform','scale(1,1)');\n\n$(\"#proceed_button\").on(\"click\",function(){\n  var proceed = true;\n  var tabs    = document.getElementsByClassName('show_tab active');\n  if(tabs.length > 0){\n    var current_tab       = document.getElementsByClassName('show_tab active')[0].id.replace(\"_button\",\"\").replace(\"tab_\",\"\");\n    var response_elements = $('#table_'+current_tab).find('.response_element');\n\n  } else {\n    response_elements = $(\".table_break:visible\").find(\".response_element\");\n    //response_elements     = $('.response_element');\n  }\n\n  for(var i = 0; i < response_elements.length; i++){\n    [this_row_no,item_name] = retrieve_row_no_item_name(response_elements[i]);\n    var this_optional = survey_obj.data[this_row_no].optional.toLowerCase();\n\n    if(this_optional.indexOf(\"no\") !== -1){\n      this_optional = this_optional.split(\"-\");       // find out whether there's a minimal number of responses\n      if(this_optional.length == 1){                  // default is that length needs to be at least 1\n        var min_resp_length = 1;\n      } else if(this_optional.length == 2) {\n        var min_resp_length = this_optional[1];\n      } else {\n        bootbox.alert(\"Error - you appear to have too many '-' characters in the 'optional' column\");\n        return false;\n      }\n    } else {\n      min_resp_length = 0;\n    }\n\n    var quest_resp = isJSON($(\"#\"+response_elements[i].id).val());\n    if (quest_resp.length < min_resp_length){\n      proceed = false;\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-success\");\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-danger\");\n    } else {\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).removeClass(\"text-danger\");\n      $(\"#\"+response_elements[i].id.replace(\"response\",\"question\")).addClass(\"text-success\");\n    }\n  }\n\n  if(current_tab == survey_obj.tabs && proceed){\n    if(typeof(sql_surveys) == \"undefined\"){\n      //$(\".table_break\");\n      console.dir('$(\".table_break:visible\")');\n      console.dir($(\".table_break:visible\"));\n      var next_table_no = parseFloat($(\".table_break:visible\")[0].id.replace(\"table\",\"\")) + 1;\n      console.dir(\"next_table_no\");\n      console.dir(next_table_no);\n      console.dir($(\".table_break#table_\"+next_table_no));\n\n      if($(\".table_break#table\"+next_table_no).length == 0){\n        if(typeof(Trial) !== \"undefined\"){\n          Trial.submit();\n        } else {\n          bootbox.alert(\"You've finished! Click on the preview button to restart.\")\n        }\n      } else {\n        $(\".table_break\").hide();\n        $(\".table_break#table\" + next_table_no).show();\n      }\n    } else {\n      $(\"#survey_outline\").html(\"<h1> You have finished the preview of this survey.</h1>\");\n    }\n  } else if(current_tab < survey_obj.tabs && proceed) {\n    current_tab ++;\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"btn-secondary\");\n    $(\"#tab_\"+current_tab+\"_button\").removeClass(\"disabled\");\n    $(\"#tab_\"+current_tab+\"_button\").addClass(\"btn-outline-primary\");\n    $(\"#tab_\"+current_tab+\"_button\").click();\n  } else if(proceed == false){\n    bootbox.alert(\"You have failed to complete at least one compulsory input.\");\n  } else if(current_tab > survey_obj.tabs){\n    bootbox.alert(\"Error - please contact the Collector team about this problem, error 'Survey_001'.\");\n  }\n});\n\n\n///////////////\n// Functions //\n///////////////\n\n\nfunction load_survey(survey){\n  // are we in preview?\n  /////////////////////\n  console.dir(\"survey\");\n  console.dir(survey);\n  if(typeof(master_json) !== \"undefined\" && master_json.surveys.preview){     // Yes\n    survey_content = survey;                                                    // i.e. the content has been passed through directly\n    survey_obj.boosts = master_json.boosts;                                //no need to be efficient in preview\n\n  } else {                                                                      // No\n    survey = survey.toLowerCase().replace(\".csv\",\"\") + \".csv\";\n\n    if(typeof(parent.parent.exp_json.surveys) !== \"undefined\" && \n       typeof(parent.parent.exp_json.surveys[survey]) !== \"undefined\"){\n      survey_content = parent.parent.exp_json.surveys[survey];\n      survey_obj.boosts = parent.parent.exp_json.boosts;                     //take boosts from exp_json\n\n    } else {\n      bootbox.alert(\"Survey \" + survey  + \" doesn't appear to exist\");\n    }\n  }\n  process_returned_questionnaire(survey_content);\n}\n\nfunction generate_feedback_string(feedback_array,this_index,feedback_color,row_no,this_row){\n  if(feedback_array){                 //i.e. if it's not null\n    if(feedback_array.length > 1){\n      return \"<div class='feedback_span_multiple \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\n    } else {\n      return \"<div class='feedback_span_single \"+this_row[\"item_name\"].toLowerCase()+\"_feedback' style='color:\"+feedback_color[this_index]+\"'>\"+feedback_array[this_index]+\"</div>\";\n    }\n  } else {\n    return \"\";\n  }\n}\n\nfunction isJSON(str) {\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    return str;\n  }\n}\n\n\nfunction likert_update(this_element,this_response,this_value){\n  [row_no,item_name] = retrieve_row_no_item_name(this_element);\n  $(\".row_\"+row_no).removeClass(\"active\");\n  $(\".row_\"+row_no).removeClass(\"btn-primary\");\n  $(\".row_\"+row_no).addClass(\"btn-outline-primary\");\n  $(this_element).removeClass(\"btn-outline-primary\");\n  $(this_element).addClass(\"btn-primary\");\n  $(\"#survey_\"+item_name+\"_response\").val(this_response);\n  response_check(this_element);\n}\n  console.dir(\"breaking near here? huh?\");\n\nfunction process_item_score(survey_obj,row_no,values_col,this_response,item,values_reverse){\n  console.dir(\"breaking near here?\");\n  item_values       = survey_obj.data[row_no][values_col].split(\"|\");\n  if(typeof(values_reverse) !== \"undefined\" && values_reverse == \"r\"){\n    item_values.reverse();\n  }\n  item_answers      = survey_obj.data[row_no][\"answers\"].split(\"|\");\n  var this_value    = item_values[item_answers.indexOf(this_response)];\n  $(\"#survey_\" + item + \"_score\").val(this_value);\n  if(typeof(this_value) !== \"undefined\"){\n    return parseFloat(this_value);\n  }\n}\n\nfunction process_returned_questionnaire(data){\n  survey_obj.data = data;\n  survey_obj.data = Papa.parse(Papa.unparse(survey_obj.data),{\n                      header:true,\n                      beforeFirstChunk: function(chunk) {\n                        var rows = chunk.split( /\\r\\n|\\r|\\n/ );\n                        var headings = rows[0].toLowerCase();\n                        rows[0] = headings;\n                        return rows.join(\"\\r\\n\");\n                      },\n                    }).data;\n\n  var col_headers = Object.keys(survey_obj.data[0]);\n  survey_obj.scales = {};\n\n  col_headers.forEach(function(header){\n    if(header.indexOf(\"score:\")==0){\n      var original_header = header;\n      header = header.replace(\"score: \",\"\");\n      header = header.replace(\"score:\",\"\");\n\n      survey_obj.scales[header] = {};\n      survey_obj.scales[header].questions = {};\n\n      //identify which questions\n      for(var i = 1; i< survey_obj.data.length; i++){\n        row = survey_obj.data[i];\n        if(row[original_header] !== \"\" && typeof(row[original_header]) !== \"undefined\"){\n          survey_obj.scales[header].questions[i] = row[original_header];\n        }\n      }\n    }\n  });\n  write_survey(survey_obj.data,\"this_survey_id\");\n  $(\"#please_wait_div\").hide();\n  $(\"#proceed_button\").show();\n\n  $('html, body').animate({\n    scrollTop: $(\"#survey_outline\").offset().top\n  }, 1000);\n}\n\nfunction process_survey_question(this_row,row_no){\n\n  if(this_row.values == \"\"){\n    this_row.values = this_row.answers;\n  }\n\n  if(typeof(this_row[\"text\"]) !== \"undefined\" && typeof(this_row[\"type\"]) !== \"undefined\" && this_row['text'].toLowerCase() == \"page_break\" | this_row['type'].toLowerCase() == \"page_break\"){\n        page_break_management.breaks_remaining++;\n        question_td = \"</tr></table><table id='table\"+page_break_management.breaks_remaining+\"' style='display:none' class='table_break'></tr>\";\n  } else {\n\n    if(typeof(this_row[\"values\"]) !== \"undefined\" & typeof(this_row[\"values\"]) !== \"function\"){ //to address microsoft edge issue.\n      value_array = this_row[\"values\"].split(\"|\");\n    } else {\n      value_array='';\n    }\n\n    if(this_row[\"item_name\"].indexOf(\" \") !== -1){\n      bootbox.alert(\"Please note that the 'item name' '\" + this_row['item_name'] + \"' is invalid because it has at least one space. Please use underscores instead of spaces. If you're not the creator of this task, please contact the person who created it.\");\n    }\n\n    // class for scoring\n    this_class = \"\";\n    for(var i=0;i<scoring_object.scales.length;i++){\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"1\"){\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(/ |-/,\"\")+\" \";\n      }\n      if(this_row[scoring_object.scales[i].toLowerCase()]==\"r1\"){\n        this_class += scoring_object.scales[i].toLowerCase().replace(\"score: \",\"\").replace(\" \",\"_\")+\"-r1 \";\n      }\n    }\n\n    [feedback_array,feedback_color] = retrieve_feedback(this_row);\n\n    response_html = '<input type=\"hidden\" class=\"response_element row_'+row_no+'\" id=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'_response\"  value=\"\">';\n\n\n    // Survey settings\n    ////////////////////\n\n    [row_ques_perc,row_resp_perc] = quest_resp_perc(settings.quest_resp_rat);\n\n    if(typeof(settings.feedback_before_response) == \"undefined\"){\n        settings.feedback_before_response = true;\n    }\n\n    if(typeof(settings.lock_after_feedback) == \"undefined\"){\n        settings.lock_after_feedback = false;\n    }\n    var question_td='';\n\n    if(typeof(this_row[\"type\"]) == \"undefined\"){\n        return false;\n    }\n\n    // Item types\n    ///////////////\n\n    if(typeof(survey_obj.boosts) !== \"undefined\" && typeof(survey_obj.boosts[this_row.type]) !== \"undefined\"){\n\n      var boost_html = survey_obj.boosts[this_row.type].contents;\n      console.dir(boost_html);\n\n      //for each row variable, insert it into the boost if possible?\n      Object.keys(this_row).forEach(function(attribute){\n        console.dir(boost_html);\n        boost_html = boost_html.replaceAll(\"{{\"+attribute+\"}}\",this_row[attribute]);\n      });\n      question_td += boost_html;\n    } else {\n\n      switch(this_row[\"type\"].toLowerCase()){\n        case \"page_start\":\n          var tabs_html = $(\"#survey_tabs\").html();\n          if(settings.tab_hor_vert == \"horizontal\"){\n            span_div = \"span\";\n          } else if(settings.tab_hor_vert == \"vertical\"){\n            span_div = \"div\";\n          }\n          if(typeof(survey_obj.tabs) == \"undefined\"){\n            survey_obj.tabs = 0;\n          } else {\n            survey_obj.tabs++;\n          }\n          if(survey_obj.tabs == 0){ //i.e. is the first tab\n            active_button = \"btn-outline-primary active\";\n          } else {\n            active_button = \"btn-secondary disabled\";\n          }\n          if(settings.tab_hor_vert == \"vertical\"){\n            var vert_btn_block = \"btn-block\";\n          } else {\n            var vert_btn_block = \"\";\n          }\n\n          tabs_html +=  '<'+span_div+' class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\n            '<label id=\"tab_' + survey_obj.tabs + '_button\" class=\"btn show_tab '+active_button+' '+vert_btn_block+'\">'+\n              '<input type=\"checkbox\" checked autocomplete=\"off\">'+ this_row['text'] +\n            '</label>'+\n          '</'+span_div+'>';\n\n          $(\"#survey_tabs\").html(tabs_html);\n\n          page_break_indexes = [];\n          survey_obj.data.forEach(function(this_row,this_index){\n            if(typeof(this_row.type) !== \"undefined\" && this_row.type.toLowerCase() == \"page_start\"){\n              page_break_indexes.push(this_index);\n            }\n          });\n\n          if(survey_obj.tabs>0){\n            question_td += \"</td><td></td></tr></table></div><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' style='display:none'><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\n          } else {\n            question_td += \"</td><td></td></tr></table><div class='survey_page' id='tab_\"+survey_obj.tabs+\"' ><table id='table_\"+survey_obj.tabs+\"' class='table_break'><tr>\";\n          }\n        break;\n\n        case \"checkbox\":\n        case \"checkbox_vertical\":\n          var options = this_row[\"answers\"].split(\"|\");\n          question_td +=  response_html;\n          for(var i=0; i<options.length;i++){\n            feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\n            question_td +=  '<div class=\"custom-control custom-checkbox\">'+\n                '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\n                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\n                feedback_string +\n            '</div>';\n          }\n          break;\n\n          case \"checkbox_horizontal\":\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\n            var options = this_row[\"answers\"].split(\"|\");\n            question_td += response_html;\n            question_td += '<table><tr>';\n            for(var i=0; i<options.length;i++){\n              question_td +=  '<td>'+\n                                '<div class=\"custom-control custom-checkbox\">'+\n                                  '<input type=\"checkbox\" class=\"custom-control-input '+this_class+' custom-control custom-checkbox '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\n                                    '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\n                                '</div>'+\n                              '</td>';\n            }\n            question_td += '</tr></table>'+feedback_string;\n          break;\n\n          case \"checkbox_single\":\n            feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\n            var this_option = this_row[\"answers\"];\n            question_td +=  response_html +\n                            '<div class=\"btn-group-toggle\" data-toggle=\"buttons\">'+\n                                '<label class=\"btn btn-outline-primary\">'+\n                                    '<input type=\"checkbox\" class=\"'+this_row[\"item_name\"]+'_item row_'+row_no+'\"  checked autocomplete=\"off\" id=\"'+this_row[\"item_name\"]+'\" onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+ this_option +\n                                '</label>'+\n                            '</div>' + feedback_string;\n          break;\n\n          case \"date\":\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\n              question_td+=   response_html+\n                              \"<input onchange='response_check(this)' class='custom-control datepicker date \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\"+\n                              feedback_string;\n          break;\n\n          case \"dropdown\":\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\n              var options = this_row[\"answers\"].split(\"|\");\n              question_td += response_html +\n                                  '<select class=\"custom-select '+this_row[\"item_name\"]+'_item row_'+row_no+'\" onchange=\"response_check(this)\" collector_button\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\n                                      '<option selected disabled hidden>-- no option selected --</option>';\n              for(var i=0; i<options.length;i++){\n                  question_td += \"<option>\"+options[i]+\"</option>\";\n              }\n              question_td += '</select>'+feedback_string;\n          break;\n\n          case \"email\":\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\n              question_td += response_html+\"<input class='form-control type='email' \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\n              question_td += feedback_string;\n          break;\n\n          case \"google_slide\":\n          case \"instruct\":\n              //question_td += </td>\"; // \"<span class='text-primary'>\" + this_row[\"text\"] + \"</span>\";\n          break;\n\n          // tidy up this code for nice looking buttons\n          case \"likert\":\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\n              console.dir(\"break coming up, ja?\");\n              console.dir(this_row);\n              var options  = this_row[\"answers\"].split(\"|\");\n              if(typeof(this_row[\"values\"]) == \"undefined\"){\n                this_row[\"values\"] = this_row[\"answers\"];\n              }\n              var values   = this_row[\"values\"].split(\"|\");\n              question_td += \"<table class='likert_table'><tr>\" +\n                                  '<td>'+\n                                      response_html +\n                                      '<div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">'; //to help detect blank likert's\n              for(var i=0; i<options.length;i++){\n                  question_td+=   '<button type=\"button\" class=\"btn btn-outline-primary '+this_row[\"item_name\"]+'_item row_'+row_no+'\"  autocomplete=\"off\" id=\"likert_'+row_no+'_'+i+'\"  onclick=\"likert_update(this,\\''+options[i]+'\\',\\''+values[i]+'\\')\">'+options[i]+'</button>';\n\n              }\n              question_td +=  \"</div>\"+\n                              \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'>\"+\n                          \"</td>\"+\n                      \"</tr>\"+\n                  \"</table>\"+feedback_string;\n          break;\n\n          case \"number\":\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\n              question_td += response_html +\"<input type='number'  onchange='response_check(this)' class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\" + feedback_string;\n          break;\n\n          case \"para\":\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\n              question_td += response_html+\"<textarea name='survey_\"+this_row['item_name'].toLowerCase()+\"' class='\"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' style='width:100%;height:200px'></textarea>\";\n              question_td += feedback_string;\n          break;\n\n          case \"radio\":\n          case \"radio_vertical\":\n            var options = this_row[\"answers\"].split(\"|\");\n            var values   = this_row[\"values\"].split(\"|\");\n            question_td +=  response_html;\n            for(var i=0; i<options.length;i++){\n              feedback_string = generate_feedback_string(feedback_array,i,feedback_color,row_no,this_row);\n\n              question_td +=  '<div class=\"custom-control custom-radio\">'+\n                                '<input type=\"radio\" class=\"custom-control-input '+this_class+'  onclick=\"likert_update(this,\\''+options[i]+'\\',\\''+values[i]+'\\')\" custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" value=\"' + options[i] + '\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\n                                '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\n                                  feedback_string +\n                              '</div>';\n\n\n            }\n            question_td +=  \"<input type='hidden' class='\"+this_class+\"' id='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score' name='survey_\"+this_row[\"item_name\"].toLowerCase()+\"_score'>\";\n          break;\n\n          case \"radio_horizontal\":\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\n              var options = this_row[\"answers\"].split(\"|\");\n              question_td +=  response_html;\n              for(var i=0; i<options.length;i++){\n                  question_td +=  '<div class=\"custom-control custom-radio custom-control-inline\">'+\n                                      '<input type=\"radio\" class=\"custom-control-input '+this_class+' custom-control custom-radio '+this_row[\"item_name\"]+'_item row_'+row_no+'\" id=\"'+this_row[\"item_name\"]+ i +'\"  onchange=\"response_check(this)\" name=\"survey_'+this_row[\"item_name\"].toLowerCase()+'\">'+\n                                      '<label class=\"custom-control-label\" for=\"'+this_row[\"item_name\"]+i+'\">'+options[i]+'</label>'+\n                                      '<div class=\"invalid-feedback\">Example invalid feedback text</div>'+\n                                  '</div>'\n              }\n              question_td += feedback_string;\n          break;\n\n          case \"report_score\":\n              question_td += \"<input disabled class='form-control score_\" + this_row[\"item_name\"] + \" \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\n          break;\n\n          case \"text\":\n              feedback_string = generate_feedback_string(feedback_array,0,feedback_color,row_no,this_row);\n              question_td += response_html+\"<input class='form-control \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' onchange='response_check(this)' type='text' name='survey_\"+this_row['item_name'].toLowerCase()+\"'>\";\n              question_td += feedback_string;\n          break;\n\n      }\n    }\n    if(feedback_array){\n        question_td += \"<button class='btn btn-outline-info feedback_btn \"+this_row[\"item_name\"]+\"_item row_\"+row_no+\"' data-toggle='tooltip' id='reveal_\"+this_row[\"item_name\"].toLowerCase()+\"_feedback'  onclick='reveal_answers(this)'>Show</button>\";\n    }\n  }\n//  question_td += '</td>';\n\n  if(typeof(this_row[\"type\"])== \"undefined\"){\n      return '';\n  } else {\n    if(this_row[\"type\"].toLowerCase()==\"instruct\"){\n      var this_row_html=\"<td colspan='2' class='text-primary'>\"+this_row[\"text\"]+\"</label></td>\";\n    } else if(this_row[\"type\"].toLowerCase()==\"google_slide\") {\n      var this_row_html=\"<td colspan='2'>\"+this_row[\"text\"]+\"</label></td>\";\n    } else if(typeof(this_row[\"no_text\"]) !== \"undefined\" && this_row[\"no_text\"] == \"on\"){\n      var this_row_html=\"<td colspan='2'>\"+question_td+\"</td>\";\n    } else {\n      if(this_row['text'].toLowerCase() == \"page_start\" | this_row['type'].toLowerCase() == \"page_start\"){\n        this_row_html = question_td;\n      }else {\n        var this_row_html=\"<td id='survey_\"+this_row[\"item_name\"].toLowerCase().replace(\" \",\"_\")+\"_question' style='width:\"+row_ques_perc+\"'>\"+this_row[\"text\"]+\"</td><td>\"+question_td+\"</label></td>\";\n      }\n    }\n    if(typeof(this_row[\"optional\"]) !== \"undefined\"){\n      if(this_row[\"optional\"].toLowerCase() == \"no\"){\n        proceed_object.name.push(this_row[\"item_name\"]);\n        proceed_object.type.push(this_row[\"type\"]);\n        proceed_object.break_no.push(page_break_management.breaks_remaining);\n      }\n    }\n    if(typeof(this_row[\"shuffle\"]) == \"undefined\" || this_row[\"shuffle\"].toLowerCase() == \"off\"){\n      this_shuffle='none';\n    } else {\n      this_shuffle=this_row[\"shuffle\"];\n    }\n    return [this_row_html,this_shuffle];\n  }\n}\n\nfunction quest_resp_perc(quest_resp_rat){\n  if(typeof(quest_resp_rat) == \"undefined\"){\n    row_resp_perc = \"35%\";\n    row_ques_perc = \"65%\";\n  } else {\n    row_resp_perc = parseFloat(100-quest_resp_rat.replace(\"%\",\"\"))+\"%\";\n    row_ques_perc = parseFloat(quest_resp_rat.replace(\"%\",\"\"))+\"%\";\n  }\n  return [row_ques_perc,row_resp_perc];\n}\n\nfunction response_check(submitted_element){\n  switch(submitted_element.type){\n    case \"checkbox\":\n      var checked_responses = $(\"[name='\"+submitted_element.name+\"']:checked\");\n      if(checked_responses.length){ //i.e. more than 0\n        var values = [];\n        for(var i = 0; i < checked_responses.length; i++){\n          values.push(checked_responses[i].value);\n        }\n        $(\"#\"+submitted_element.name+\"_response\").val(JSON.stringify(values));\n      } else {\n        $(\"#\"+submitted_element.name+\"_response\").val(\"\");\n      }\n      break;\n\n      case \"button\":\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.innerHTML);\n      break;\n\n      case \"number\":\n      case \"select-one\":\n      case \"text\":\n      case \"textarea\":\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\n      break;\n\n\n      case \"radio\":\n        $(\"#\"+submitted_element.name+\"_response\").val(submitted_element.value);\n      break;\n    }\n    update_score();\n}\n\nfunction retrieve_feedback(this_row){\n  if(typeof(this_row[\"feedback\"]) !== \"undefined\" && this_row[\"feedback\"] !== \"\"){\n    feedback_array = this_row[\"feedback\"].split(\"|\");\n    if(typeof(this_row[\"feedback_color\"]) == \"undefined\"){\n      bootbox.alert(\"The color for the feedback options has not been set. If you created this questionnaire, please add a column 'feedback_color' to your survey and separate the colors by a pipe (|) character.\");\n    }\n    feedback_color = this_row[\"feedback_color\"].split(\"|\");\n  } else {\n    feedback_array = null;\n    feedback_color = '';\n  }\n  return [feedback_array,feedback_color];\n}\n\nfunction retrieve_row_no_item_name(this_element){\n  var these_classes = this_element.className.split(\" \");\n  var row_no;\n  var item_name;\n  these_classes.forEach(function(this_class){\n    if (this_class.indexOf('row_') > -1) {\n      row_no = this_class.replace(\"row_\",\"\");\n    }\n    if (this_class.indexOf('_item') > -1) {\n      item_name = this_class.replace(\"_item\",\"\").toLowerCase();\n    }\n  });\n  return [row_no,item_name];\n}\n\nfunction reveal_answers(this_element){\n  var this_response = $(\"#\"+this_element.id.replace(\"reveal_\",\"survey_\").replace(\"_feedback\",\"_response\")).val();\n  response_present = this_response == \"\" ? false : true;\n\n  if(settings.feedback_before_response == false && response_present == false){\n    bootbox.alert(\"Please respond before trying reveal the feedback.\")\n  } else {\n    if($(\"#\"+this_element.id).hasClass(\"btn-outline-info\")){\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).show(500);\n      if(settings.lock_after_feedback){\n        var item_class = this_element.id.replace(\"_feedback\",\"_item\").replace(\"reveal_\",\"\");\n        $(\".\"+item_class).prop(\"disabled\",true);\n        document.getElementsByClassName(item_class).title = \"The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback\";\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\n        $(\"#\"+this_element.id).html(\"Locked\");\n        document.getElementById(this_element.id).title = 'The person creating this content has set it so that your answers are locked in once you have chosen to see the feedback';\n        $(\"#\"+this_element.id).addClass(\"disabled\");\n      } else {\n        $(\"#\"+this_element.id).html(\"Hide\");\n        $(\"#\"+this_element.id).removeClass(\"btn-outline-info\");\n        $(\"#\"+this_element.id).addClass(\"btn-info\");\n      }\n    } else {\n      $(\"#\"+this_element.id).html(\"Show\");\n      $(\".\"+this_element.id.replace(\"reveal_\",\"\")).hide(500);\n      $(\"#\"+this_element.id).addClass(\"btn-outline-info\");\n      $(\"#\"+this_element.id).removeClass(\"btn-info\");\n    }\n  }\n}\n\nfunction shuffle(array) {                                   // http://stackoverflow.com/questions/962802#962890\n  var tmp, current, top = array.length;\n  if(top) while(--top) {\n    current = Math.floor(Math.random() * (top + 1));\n    tmp = array[current];\n    array[current] = array[top];\n    array[top] = tmp;\n  }\n  return array;\n}\n\nfunction update_score(){\n  var scales = Object.keys(survey_obj.scales);\n  scales.forEach(function(scale){\n    this_scale = survey_obj.scales[scale];\n    var questions = Object.keys(this_scale.questions);\n    var this_score = 0;\n    complete_score = true;\n\n    questions.forEach(function(row_no){\n      var item = survey_obj.data[row_no].item_name.toLowerCase();\n      var this_response = $(\"#survey_\"+item+\"_response\").val(); //response\n      var normal_reverse = this_scale.questions[row_no];\n\n      if(normal_reverse.indexOf(\"-\") == -1){\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item,\"r\");\n        } else {\n          this_value = process_item_score(survey_obj,row_no,\"values\",this_response,item);\n        }\n      } else {\n        values_reverse = normal_reverse.split(\"-\");\n        values_col     = values_reverse[0].toLowerCase();\n        normal_reverse = values_reverse[1];\n        var multiplier = parseFloat(normal_reverse.replace(\"r\",\"\"));\n\n        if(normal_reverse.indexOf(\"r\") == 0){ //reverse the values\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item,\"r\");\n        } else {\n          this_value = process_item_score(survey_obj,row_no,values_col,this_response,item);\n        }\n      }\n      if(typeof(this_value) !== \"undefined\"){\n        this_score += multiplier * this_value;\n      } else {\n        complete_score = false;\n      }\n    });\n    if(complete_score){\n      $(\".score_\"+scale).addClass(\"bg-success\");\n      $(\".score_\"+scale).removeClass(\"bg-danger\");\n      $(\".score_\"+scale).addClass(\"text-light\");\n      document.getElementsByClassName(\"score_\"+scale).title = 'All relevant questions have been answered';\n    } else {\n      $(\".score_\"+scale).removeClass(\"text-success\");\n      $(\".score_\"+scale).addClass(\"bg-danger\");\n      $(\".score_\"+scale).addClass(\"text-light\");\n      document.getElementsByClassName(\"score_\"+scale).title = 'At least one relevant questions has NOT been answered';\n    }\n    $(\".score_\"+scale).val(this_score);\n  });\n}\n\nfunction write_survey(this_survey,this_id){\n  scoring_object.update_scales(this_survey);\n  this_survey_html=\"<table class='table_break' id='table0'>\";\n  this_survey_object={\n    content:[],\n    shuffle:[],\n    content_new_order:[],\n    shuffled_content:[],\n    shuffled_arrays:{},\n  }\n\n  this_survey_html += \"<tr>\";\n  for(i = 0; i < this_survey.length; i++){\n    this_row = this_survey[i];\n    row_html = process_survey_question(this_row,i);\n    this_survey_object.content.push(row_html[0]);\n    this_survey_object.shuffle.push(row_html[1]);\n\t}\n\n\tunique_shuffles = this_survey_object.shuffle.filter((v,i,a)=>a.indexOf(v)==i); //by Camilo Martin on https://stackoverflow.com/questions/1960473/unique-values-in-an-array\n\n\tfor(var i=0;i<unique_shuffles.length;i++){\n    if(typeof(unique_shuffles[i]) !== \"undefined\" &&\n      unique_shuffles[i] !== \"none\" &&\n      unique_shuffles[i] !== \"\"){\n        shuffled_content = this_survey_object.shuffle.map(function(element,index){\n    \t   if(typeof(element)!== \"undefined\" && element.toLowerCase() !== \"none\" && element.toLowerCase() == unique_shuffles[i]){\n  \t       return this_survey_object.content[index];\n    \t   }\n    \t}).filter(elm => typeof(elm) !== \"undefined\");\n    \tnew_order = shuffle(shuffled_content);\n    \tthis_survey_object.shuffled_arrays[unique_shuffles[i]]=new_order; // add new array with dynamic name\n    }\n\t}\n\n\t// loop through lists, taking one off from the shuffled list and replacing the row with one from the shuffled list\n\tfor(var i=0;i<this_survey_object.content.length;i++){\n    var this_index = Object.keys(this_survey_object.shuffled_arrays).indexOf(this_survey_object.shuffle[i]);\n    if(this_index !== -1){\n      //take first item off relevant list and delete item\n      var this_item = this_survey_object.shuffled_arrays[Object.keys(this_survey_object.shuffled_arrays)[this_index]].shift();\n      this_survey_object.content_new_order[i]=this_item;\n    } else {\n      this_survey_object.content_new_order[i]=this_survey_object.content[i];\n    }\n\t}\n\n\tquestions_in_order = this_survey_object.content_new_order.join(\"</tr><tr>\");\n\tquestions_in_order += \"</tr>\";\n\n\tthis_survey_html += questions_in_order;\n\tthis_survey_html += \"</table>\";\n\n\t$(\"#\" + this_id).html(this_survey_html);\n\t$(\"#\" + this_id).show(1000);\n\n\t//scroll to top\n\n\n\t$(\".show_tab\").on(\"click\",function(){\n    if(this.className.indexOf(\"disabled\") == -1){\n      $(\".show_tab\").removeClass(\"active\");\n      $(\".survey_page\").hide();\n      $(\"#\"+this.id.replace(\"_button\",\"\")).show();\n    } else {\n      bootbox.alert(\"You have not yet unlocked this tab - maybe try clicking on <b>Proceed</b>?\");\n    }\n\t});\n  $('[data-toggle=\"tooltip\"]').tooltip();\n  $(\".custom-checkbox\").prop(\"indeterminate\",true);\n}\n\n//////////////////\n// Load survey  //\n//////////////////\ncurrent_survey = \"{{survey}}\";\nif(typeof(Trial) !== \"undefined\"){  // This check is to help this code work when previewing trialtypes\n  Trial.set_timer(function(){       // This chunk is for when the survey is run within an actual trial\n    load_survey(current_survey);\n  },100);\n} else {                            // This chunk is for when the survey is being previewed in the \"survey editor\"\n  load_survey(current_survey);\n}\n\n\n</script>"}, "python_procs": {"procedure_1.csv": "Item,Trial Type,Max Time,Text,Shuffle 1,survey,\r\n2,Instruct,user,This is the start of a new experiment.,off,,\r\n0,survey,user,,off,zqa_pq.csv,\r\n0,survey,user,,off,ius.csv,\r\n0,survey,user,,off,bis11.csv,\r\n,,,,,,"}, "python_conditions": "Name,Notes,Stimuli,Procedure,fullscreen,welcome,participant_id,end_message,start_message,buffer,\r\ncondition_1,You can put more detailed notes in this field,stimuli_1.csv,procedure_1.csv,off,,on,,,5,\r\n,,,,,,,,,,", "python_stims": {"stimuli_1.csv": "Cue,Answer,\r\nA,Apple,\r\nB,Banana,\r\n,,"}, "boosts": {}, "conditions": [{"name": "condition_1", "notes": "You can put more detailed notes in this field", "stimuli": "stimuli_1.csv", "procedure": "procedure_1.csv", "fullscreen": "off", "welcome": "", "participant_id": "on", "end_message": "", "start_message": "", "buffer": "5", "": ""}]}